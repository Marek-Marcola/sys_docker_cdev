VERSION_ENV="202509190061"

#DEBUG=1
PREFIX=is
REGP=is

if [[ "$REPO" = "kali-headless" ]]; then
  : ${FROM:=kalilinux/kali-rolling}
  VER=$(docker image inspect -f '{{index .Config.Labels "org.opencontainers.image.version"}}' $FROM)
  TAG=latest
  APT_URL="http://nexus.dc.local:8081/repository/repo-apt-proxy-kali"
  BUILD_OPT_CUSTOM="
  --build-arg APT_URL="$APT_URL""
  INFO="Kali Linux Rolling (headless)"
  DOCS="c -P -b -d"
fi

if [[ "$REPO" = "kali" ]]; then
  : ${FROM:=is/kali-headless}
  VER=$(docker image inspect -f '{{index .Config.Labels "org.opencontainers.image.version"}}' $FROM)
  TAG=latest
  INFO="Kali Linux Rolling"
fi

if [[ "$REPO" = "debian13" ]]; then
  : ${VER:=13.1}
  [[ "$VER" = "13.1" ]] && : ${FROM:=debian:13.1} && TAG=latest
  [[ "$VER" = "13.0" ]] && : ${FROM:=debian:13.0}
  INFO="Debian 13 (13.1 13.0)"
fi

if [[ "$REPO" = "debian12" ]]; then
  : ${VER:=12.12}
  [[ "$VER" = "12.12" ]] && : ${FROM:=debian:12.12} && TAG=latest
  [[ "$VER" = "12.11" ]] && : ${FROM:=debian:12.11}
  [[ "$VER" = "12.10" ]] && : ${FROM:=debian:12.10}
  INFO="Debian 12 (12.12 12.11 12.10)"
fi

if [[ "$REPO" = "debian11" ]]; then
  : ${VER:=11.9}
  [[ "$VER" = "11.9" ]] && : ${FROM:=debian:11.9} && TAG=latest
  [[ "$VER" = "11.8" ]] && : ${FROM:=debian:11.8}
  [[ "$VER" = "11.7" ]] && : ${FROM:=debian:11.7}
  INFO="Debian 11 (11.9 11.8 11.7)"
fi

if [[ "$REPO" = "debian10" ]]; then
  : ${VER:=10.13}
  [[ "$VER" = "10.13" ]] && : ${FROM:=debian:10.13} && TAG=latest
  [[ "$VER" = "10.12" ]] && : ${FROM:=debian:10.12}
  [[ "$VER" = "10.11" ]] && : ${FROM:=debian:10.11}
  INFO="Debian 10 (10.13 10.12 10.11)"
fi

if [[ "$REPO" = "rocky10" ]]; then
  : ${VER:=10.0}
  [[ "$VER" = "10.0" ]] && : ${FROM:=rockylinux/rockylinux:10.0} && TAG=latest
  INFO="Rocky 10 (10.0)"
fi

if [[ "$REPO" = "rocky9" ]]; then
  : ${VER:=9.6}
  [[ "$VER" = "9.6" ]] && : ${FROM:=rockylinux/rockylinux:9.6} && TAG=latest
  [[ "$VER" = "9.5" ]] && : ${FROM:=rockylinux/rockylinux:9.5}
  [[ "$VER" = "9.4" ]] && : ${FROM:=rockylinux/rockylinux:9.4}
  INFO="Rocky 9 (9.6 9.5 9.4)"
fi

if [[ "$REPO" = "rocky8" ]]; then
  : ${VER:=8.10}
  [[ "$VER" = "8.10" ]] && : ${FROM:=rockylinux/rockylinux:8.10} && TAG=latest
  [[ "$VER" = "8.9"  ]] && : ${FROM:=rockylinux/rockylinux:8.9}
  [[ "$VER" = "8.8"  ]] && : ${FROM:=rockylinux/rockylinux:8.8}
  INFO="Rocky 8 (8.10 8.9 8.8)"
fi

if [[ "$REPO" = "centos7" ]]; then
  : ${VER:=7.9}
  [[ "$VER" = "7.9" ]] && : ${FROM:=centos:7.9.2009} && TAG=latest
  [[ "$VER" = "7.8" ]] && : ${FROM:=centos:7.8.2003}
  [[ "$VER" = "7.7" ]] && : ${FROM:=centos:7.7.1908}
  INFO="CentOS 7 (7.9 7.8 7.7)"
fi

if [[ "$REPO" = "jdk" ]]; then
  [[ "$SUFFIX" = "-centos7"  ]] && FROM="$PREFIX/centos7"
  [[ "$SUFFIX" = "-debian11" ]] && FROM="$PREFIX/debian11"
  [[ "$SUFFIX" = "-debian12" ]] && FROM="$PREFIX/debian12"
  [[ "$SUFFIX" = "-debian13" ]] && FROM="$PREFIX/debian13"
  : ${FROM:=$PREFIX/debian13}
  : ${INST:=-debian13}
  : ${VER:=21}
  [[ "$VER" = "25"  ]] && VER="25.0.0"
  [[ "$VER" = "24"  ]] && VER="24.0.2"
  [[ "$VER" = "23"  ]] && VER="23.0.2"
  [[ "$VER" = "22"  ]] && VER="22.0.2"
  [[ "$VER" = "21"  ]] && VER="21.0.2"
  [[ "$VER" = "20"  ]] && VER="20.0.1"
  [[ "$VER" = "19"  ]] && VER="19.0.2"
  [[ "$VER" = "18"  ]] && VER="18.0.2.1"
  [[ "$VER" = "17"  ]] && { [[ "$FROM" = "$PREFIX/centos7" ]] && VER="17.0.2"; }
  [[ "$VER" = "16"  ]] && VER="16.0.2"
  [[ "$VER" = "15"  ]] && VER="15.0.2"
  [[ "$VER" = "14"  ]] && VER="14.0.2"
  [[ "$VER" = "11"  ]] && FROM="$PREFIX/debian11" && INST="-debian11"
  [[ "$VER" = "1.8" ]] && FROM="$PREFIX/centos7" && INST="-centos7"
  #TAG=${VER%.*},${VER%%.*}
  TAG=${VER%%.*}
  [[ "$VER" = "25.0.0" ]] && URL="https://download.java.net/java/GA/jdk25/bd75d5f9689641da8e1daabeccb5528b/36/GPL/openjdk-25_linux-x64_bin.tar.gz"
  [[ "$VER" = "24.0.2" ]] && URL="https://download.java.net/java/GA/jdk24.0.2/fdc5d0102fe0414db21410ad5834341f/12/GPL/openjdk-24.0.2_linux-x64_bin.tar.gz"
  [[ "$VER" = "23.0.2" ]] && URL="https://download.java.net/java/GA/jdk23.0.2/6da2a6609d6e406f85c491fcb119101b/7/GPL/openjdk-23.0.2_linux-x64_bin.tar.gz"
  [[ "$VER" = "21.0.1" ]] && URL="https://download.java.net/java/GA/jdk21.0.1/415e3f918a1f4062a0074a2794853d0d/12/GPL/openjdk-21.0.1_linux-x64_bin.tar.gz"
  [[ "$VER" = "20.0.1" ]] && URL="https://download.java.net/java/GA/jdk20.0.1/b4887098932d415489976708ad6d1a4b/9/GPL/openjdk-20.0.1_linux-x64_bin.tar.gz"
  [[ "$VER" = "19.0.2" ]] && URL="https://download.java.net/java/GA/jdk19.0.2/fdb695a9d9064ad6b064dc6df578380c/7/GPL/openjdk-19.0.2_linux-x64_bin.tar.gz"
  [[ "$VER" = "19.0.1" ]] && URL="https://download.java.net/java/GA/jdk19.0.1/afdd2e245b014143b62ccb916125e3ce/10/GPL/openjdk-19.0.1_linux-x64_bin.tar.gz"
  [[ "$VER" = "19.0.0" ]] && URL="https://download.java.net/java/GA/jdk19/877d6127e982470ba2a7faa31cc93d04/36/GPL/openjdk-19_linux-x64_bin.tar.gz"
  [[ "$VER" = "18.0.2.1" ]] && URL="https://download.java.net/java/GA/jdk18.0.2.1/db379da656dc47308e138f21b33976fa/1/GPL/openjdk-18.0.2.1_linux-x64_bin.tar.gz"
  [[ "$VER" = "18.0.2" ]] && URL="https://download.java.net/java/GA/jdk18.0.2/f6ad4b4450fd4d298113270ec84f30ee/9/GPL/openjdk-18.0.2_linux-x64_bin.tar.gz"
  [[ "$VER" = "18.0.1" ]] && URL="https://download.java.net/java/GA/jdk18.0.1/3f48cabb83014f9fab465e280ccf630b/10/GPL/openjdk-18.0.1_linux-x64_bin.tar.gz"
  [[ "$VER" = "18.0.0" ]] && URL="https://download.java.net/java/GA/jdk18/43f95e8614114aeaa8e8a5fcf20a682d/36/GPL/openjdk-18_linux-x64_bin.tar.gz"
  [[ "$VER" = "17.0.2" ]] && URL="https://download.java.net/java/GA/jdk17.0.2/dfd4a8d0985749f896bed50d7138ee7f/8/GPL/openjdk-17.0.2_linux-x64_bin.tar.gz"
  [[ "$VER" = "17.0.1" ]] && URL="https://download.java.net/java/GA/jdk17.0.1/2a2082e5a09d4267845be086888add4f/12/GPL/openjdk-17.0.1_linux-x64_bin.tar.gz"
  [[ "$VER" = "17.0.0" ]] && URL="https://download.java.net/java/GA/jdk17/0d483333a00540d886896bac774ff48b/35/GPL/openjdk-17_linux-x64_bin.tar.gz"
  [[ "$VER" = "16.0.2" ]] && URL="https://download.java.net/java/GA/jdk16.0.2/d4a915d82b4c4fbb9bde534da945d746/7/GPL/openjdk-16.0.2_linux-x64_bin.tar.gz"
  [[ "$VER" = "16.0.1" ]] && URL="https://download.java.net/java/GA/jdk16.0.1/7147401fd7354114ac51ef3e1328291f/9/GPL/openjdk-16.0.1_linux-x64_bin.tar.gz"
  [[ "$VER" = "15.0.2" ]] && URL="https://download.java.net/java/GA/jdk15.0.2/0d1cfde4252546c6931946de8db48ee2/7/GPL/openjdk-15.0.2_linux-x64_bin.tar.gz"
  [[ "$VER" = "15.0.1" ]] && URL="https://download.java.net/java/GA/jdk15.0.1/51f4f36ad4ef43e39d0dfdbaf6549e32/9/GPL/openjdk-15.0.1_linux-x64_bin.tar.gz"
  [[ "$VER" = "14.0.2" ]] && URL="https://download.java.net/java/GA/jdk14.0.2/205943a0976c4ed48cb16f1043c5c647/12/GPL/openjdk-14.0.2_linux-x64_bin.tar.gz"
  [[ "$VER" = "11.0.2" ]] && URL="https://download.java.net/java/GA/jdk11/9/GPL/openjdk-11.0.2_linux-x64_bin.tar.gz"
  BUILD_OPT_CUSTOM="
  --build-arg URL="$URL""
  INFO="OpenJDK (25 24 23 22 21 20 19 18 17 16 15 14 11.0.2 11 1.8)"
fi

if [[ "$REPO" = "vagrant" ]]; then
  : ${VER:=2.3}
  [[ "$VER" = "2.3" ]] && : ${FROM:=is/debian12}
  TAG=latest
  RUN_OPT_CUSTOM1="
  --network host
  --volume /var/run/libvirt/:/var/run/libvirt/
  --volume $HOME:$HOME
  --volume $(realpath ${PWD}):${PWD}
  --workdir ${PWD}"
  INFO="Vagrant (2.3)"
fi

if [[ "$REPO" = "cups" ]]; then
  : ${VER:=2.4}
  [[ "$VER" = "2.4" ]] && VER="2.4.14" && : ${FROM:=is/debian13}
  [[ "$VER" = "2.3" ]] && : ${FROM:=is/debian11}
  [[ "$VER" = "2.2" ]] && : ${FROM:=is/debian10}
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 631:631/tcp
  --volume /usr/local/etc/ap-cups-t:/usr/local/etc/cups
  --volume /var/opt/cups/ap-cups-t:/var/opt/cups
  --volume /var/run/dbus:/var/run/dbus"
  INFO="CUPS (2.4 2.3 2.2)"
fi

if [[ "$REPO" = "postfix" ]]; then
  : ${VER:=3.10}
  [[ "$VER" = "3.10" ]] && VER="3.10.4" && : ${FROM:=is/debian12}
  [[ "$VER" = "3.5" ]] && : ${FROM:=is/debian11}
  [[ "$VER" = "3.4" ]] && : ${FROM:=is/debian10}
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 25:25/tcp
  --volume /usr/local/etc/ap-postfix-t:/usr/local/etc/postfix
  --volume /var/opt/postfix:/var/spool/postfix"
  INFO="Postfix (3.10 3.5 3.4)"
fi

if [[ "$REPO" = "spamassassin" ]]; then
  : ${VER:=4.0}
  [[ "$VER" = "4.0" ]] && : ${FROM:=is/debian12}
  [[ "$VER" = "3.4" ]] && : ${FROM:=is/debian11}
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 783:783/tcp
  --volume /var/opt/ap-spamassassin-t:/var/opt/spamassassin"
  INFO="Spamassassin (4.0 3.4)"
fi

if [[ "$REPO" = "dovecot" ]]; then
  : ${VER:=2.4}
  : ${FROM:=is/debian12}
  [[ "$VER" = "2.4" ]] && VER="2.4.1"
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 9143:143/tcp
  --publish 9993:993/tcp
  --volume /usr/local/etc/pki:/usr/local/etc/pki
  --volume /usr/local/etc/ap-dovecot-t:/usr/local/etc/dovecot
  --volume /var/opt/vmail:/var/opt/vmail"
  INFO="Dovecot"
fi

if [[ "$REPO" = "dnsmasq" ]]; then
  : ${VER:=2.91}
  : ${FROM:=is/debian12}
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --net host
  --volume /usr/local/etc/ap-dnsmasq-t:/usr/local/etc/dnsmasq.d
  --cap-add=NET_ADMIN"
  INFO="Dnsmasq"
fi

if [[ "$REPO" = "hostapd" ]]; then
  : ${VER:=2.11}
  : ${FROM:=is/debian12}
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --net host
  --volume /usr/local/etc/ap-hostapd-t:/usr/local/etc/hostapd
  --cap-add=NET_ADMIN"
  INFO="Hostapd"
fi

if [[ "$REPO" = "zipkin" ]]; then
  : ${FROM:=is/jdk:17}
  : ${VER:=3.0.6}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 9411:9411/tcp"
  INFO="Zipkin"
fi

if [[ "$REPO" = "jaeger" ]]; then
  : ${FROM:=is/debian12}
  : ${VER:=1.54.0}
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 16686:16686/tcp"
  INFO="Jaeger"
fi

if [[ "$REPO" = "loki" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=2.9.9}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 3100:3100/tcp
  --volume /usr/local/etc/ap-loki-t:/usr/local/etc/loki:ro
  --env LOKI_OPTS=-print-config-stderr"
  INFO="Loki"
fi

if [[ "$REPO" = "promtail" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=2.9.9}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 9080:9080/tcp
  --volume /usr/local/etc/ap-promtail-t:/usr/local/etc/promtail:ro
  --volume /etc/machine-id:/etc/machine-id:ro
  --volume /var/log:/var/log:rw
  --env PROMTAIL_OPTS=-print-config-stderr"
  INFO="Promtail"
fi

if [[ "$REPO" = "grafana" ]]; then
  : ${FROM:=$PREFIX/debian13}
  : ${VER:=12.1.1}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 3000:3000/tcp
  --volume /usr/local/etc/ap-grafana-t:/usr/local/etc/grafana"
  INFO="Grafana"
fi

if [[ "$REPO" = "prometheus" ]]; then
  : ${FROM:=$PREFIX/debian13}
  : ${VER:=3.5.0}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 9090:9090/tcp
  --volume /usr/local/etc/ap-prometheus-t:/usr/local/etc/prometheus"
  INFO="Prometheus"
fi

if [[ "$REPO" = "alertmanager" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=0.28.1}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 9093:9093/tcp
  --volume /usr/local/etc/ap-alertmanager-t:/usr/local/etc/alertmanager"
  INFO="Alertmanager"
fi

if [[ "$REPO" = "node-exporter" ]]; then
  : ${FROM:=$PREFIX/debian13}
  : ${VER:=1.9.1}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 9100:9100/tcp
  --volume /:/host:ro,rslave
  --net=host
  --pid=host
  --env NODE_EXPORTER_OPTS=--opts.k8s"
  INFO="Node exporter"
fi

if [[ "$REPO" = "blackbox-exporter" ]]; then
  : ${FROM:=$PREFIX/debian13}
  : ${VER:=0.27.0}
  INFO="Blackbox exporter"
fi

if [[ "$REPO" = "podman-exporter" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=1.3.0}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 9882:9882/tcp
  --volume /run/podman/podman.sock:/run/podman/podman.sock
  --env CONTAINER_HOST=unix:///run/podman/podman.sock"
  INFO="Podman exporter"
fi

if [[ "$REPO" = "slurm-exporter" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=1.0.11}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 8080:8080/tcp
  --env SLURM_EXPORTER_API_URL=10.100.51.11:6820
  --env SLURM_EXPORTER_API_USER=root
  --env SLURM_EXPORTER_API_TOKEN=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjIwNDU0MDQ5OTAsImlhdCI6MTczMDA0NDk5MCwic3VuIjoicm9vdCJ9.oqnSss3_eCvfsOagmgtoCqd2w6sVV9iOv6p_JiOzO8w"
  INFO="SLURM exporter"
fi

if [[ "$REPO" = "infiniband-exporter" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=0.9.0}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 9315:9315/tcp"
  INFO="Infiniband exporter"
fi

if [[ "$REPO" = "unbound" ]]; then
  : ${FROM:=$PREFIX/debian13}
  : ${VER:=1.24.0}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 1053:1053/tcp
  --publish 1053:1053/udp
  --volume /usr/local/etc/ap-unbound-t:/usr/local/etc/unbound:ro"
  INFO="Unbound"
fi

if [[ "$REPO" = "coredns" ]]; then
  : ${FROM:=$PREFIX/debian13}
  : ${VER:=1.12.4}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 1053:1053/tcp
  --publish 1053:1053/udp
  --volume /usr/local/etc/ap-coredns-t:/usr/local/etc/coredns:ro"
  INFO="CoreDNS"
fi

if [[ "$REPO" = "etcd" ]]; then
  : ${FROM:=$PREFIX/centos7}
  : ${VER:=3.4.15}
  #TAG=${VER%.*},${VER%%.*}
  INFO="Etcd"
fi

if [[ "$REPO" = "pgsql" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=17}
  [[ "$VER" = "17" ]] && VER="17.6"
  [[ "$VER" = "16" ]] && VER="16.10"
  [[ "$VER" = "15" ]] && VER="15.14"
  [[ "$VER" = "14" ]] && VER="14.19"
  [[ "$VER" = "13" ]] && VER="13.22"
  [[ "$VER" = "12" ]] && VER="12.20"
  [[ "$VER" = "11" ]] && VER="11.22"
  [[ "$VER" = "10" ]] && VER="10.23"
  #TAG=${VER%.*}
  INFO="PostgreSQL (17 16 15 14 13 12 11 10)"
fi

if [[ "$REPO" = "mariadb" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=11.8}
  [[ "$VER" = "11.8"  ]] && VER="11.8.2"
  [[ "$VER" = "11.5"  ]] && VER="11.5.2"
  [[ "$VER" = "11.4"  ]] && VER="11.4.7"
  [[ "$VER" = "10.11" ]] && VER="10.11.13"
  [[ "$VER" = "10.6"  ]] && VER="10.6.8"
  [[ "$VER" = "10.5"  ]] && VER="10.5.16"
  [[ "$VER" = "10.4"  ]] && VER="10.4.25"
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 3366:3306/tcp
  --volume /var/opt/mysql/db-mariadb-slurm:/var/opt/mysql/data/db-mariadb-slurm
  --env MYDBCL=db-mariadb-slurm"
  INFO="MariaDB (11.8 11.4 10.11 10.6 10.5 10.4)"
fi

if [[ "$REPO" = "redis" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=7.4.1}
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 6379:6379/tcp
  --volume /usr/local/etc/ap-redis-t:/usr/local/etc/redis:ro
  --volume /var/opt/redis/ap-redis-t:/var/opt/redis:rw"
  INFO="Redis (7.4)"
fi

if [[ "$REPO" = "freeradius" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=3.0.27}
  #TAG=${VER%.*},${VER%.*.*}
  RUN_OPT_CUSTOM1="
  --network host
  --volume /usr/local/etc/raddb-dev:/usr/local/etc/raddb:ro
  --volume /usr/local/etc/pki-dev:/usr/local/etc/pki:ro"
  INFO="FreeRADIUS"
fi

if [[ "$REPO" = "openldap" ]]; then 
  : ${VER:=2.6}
  [[ $VER =~ ^2.6$ ]] && VER="2.6.10"
  [[ $VER =~ ^2.5$ ]] && VER="2.5.20"
  [[ $VER =~ ^2.4$ ]] && VER="2.4.59"
  [[ $VER =~ ^2.6  ]] && : ${FROM:=$PREFIX/debian12}
  [[ $VER =~ ^2.5  ]] && : ${FROM:=$PREFIX/debian12}
  [[ $VER =~ ^2.4  ]] && : ${FROM:=$PREFIX/debian12}
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 1389:389
  --volume /usr/local/etc/ap-openldap-t:/usr/local/etc/openldap:ro
  --volume /var/opt/ap-openldap-t:/var/opt/openldap"
  INFO="OpenLDAP (2.6 2.5 2.4)"
fi

if [[ "$REPO" = "libreoffice" ]]; then
  : ${FROM:=$PREFIX/jdk:15}
  : ${VER:=7.3}
  : ${URL:=https://download.documentfoundation.org/libreoffice/stable}
  [[ "$VER" = "7.3" ]] && VER="7.3.3"
  [[ "$VER" = "7.2" ]] && VER="7.2.6"
  [[ "$VER" = "7.1" ]] && VER="7.1.8.1" && URL="https://downloadarchive.documentfoundation.org/libreoffice/old"
  [[ "$VER" = "6.4" ]] && VER="6.4.7.2" && URL="https://downloadarchive.documentfoundation.org/libreoffice/old"
  #TAG=$(IFS=".";set -- $VER;echo $1),$(IFS=".";set -- $VER;echo $1.$2)
  BUILD_OPT_CUSTOM="
  --build-arg URL="$URL""
  INFO="LibreOffice (7.3 7.2 7.1 6.4)"
fi

if [[ "$REPO" = "maven" ]]; then
  : ${FROM:=$PREFIX/jdk:21}
  : ${VER:=3.9}
  [[ "$VER" = "3.9" ]] && VER="3.9.9"
  [[ "$VER" = "3.8" ]] && VER="3.8.6"
  #TAG=${VER%.*.*}
  INFO="Apache Maven (3.9 3.8)"
fi

if [[ "$REPO" = "go" ]]; then
  : ${FROM:=$PREFIX/centos7}
  : ${VER:=1.24}
  [[ "$VER" = "1.24" ]] && VER="1.24.1"
  #TAG=${VER%.*},${VER%.*.*}
  INFO="Go (1.24)"
fi

if [[ "$REPO" = "rust" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=1.76.0}
  #TAG=${VER%.*},${VER%.*.*}
  INFO="Rust"
fi

if [[ "$REPO" = "envoy" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=1.29.1}
  #TAG=${VER%.*},${VER%.*.*}
  RUN_OPT_CUSTOM1="
  --publish 15000:15000
  --publish 8080:8080
  --volume /usr/local/etc/pki:/usr/local/etc/pki:ro
  --volume /usr/local/etc/ap-envoy:/usr/local/etc/envoy2:ro"
  INFO="Envoy"
fi

if [[ "$REPO" = "haproxy" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=3.2}
  [[ "$VER" = "3.2" ]] && VER="3.2.4"
  [[ "$VER" = "2.9" ]] && VER="2.9.7"
  [[ "$VER" = "2.8" ]] && VER="2.8.4"
  #TAG=latest
  RUN_OPT_CUSTOM1="
  --publish 9000:80
  --publish 9443:443
  --volume /usr/local/etc/pki:/usr/local/etc/pki:ro
  --volume /usr/local/etc/ap-haproxy-t:/usr/local/etc/haproxy:ro"
  INFO="HAproxy (3.2 2.9 2.8)"
fi

if [[ "$REPO" = "squid" ]]; then
  : ${FROM:=$PREFIX/debian13}
  : ${VER:=7}
  [[ "$VER" = "7" ]] && VER="7.1"
  [[ "$VER" = "6" ]] && VER="6.14"
  [[ "$VER" = "5" ]] && VER="5.8"
  #TAG=${VER%%.*},latest
  RUN_OPT_CUSTOM1="
  --volume /usr/local/etc/ap-squid-t:/usr/local/etc/squid:ro"
  INFO="Squid Web Proxy"
fi

if [[ "$REPO" = "tomcat" ]]; then
  : ${FROM:=$PREFIX/jdk:17}
  : ${VER:=9.0}
  [[ "$VER" = "11.0" ]] && VER="11.0.8"
  [[ "$VER" = "10.1" ]] && VER="10.1.42"
  [[ "$VER" = "10.0" ]] && VER="10.0.27"
  [[ "$VER" = "9.0" ]] && VER="9.0.108"
  [[ "$VER" = "8.5" ]] && VER="8.5.93"
  TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8080:8080
  --publish 8443:8443"
  INFO="Apache Tomcat (11.0 10.1 10.0 9.0 8.5)"
  DOCS="c -F is/jdk:17 -S-jdk17!!c -F is/jdk:15 -S-jdk15"
fi

if [[ "$REPO" = "wildfly" ]]; then
  : ${FROM:=$PREFIX/jdk:17}
  : ${VER:=29}
  [[ "$VER" = "29" ]] && VER="29.0.0"
  [[ "$VER" = "22" ]] && VER="22.0.0"
  #TAG=${VER%.*.*}
  RUN_OPT_CUSTOM1="
  --publish 8080:8080
  --publish 8443:8443"
  INFO="WildFly (29 22)"
fi

if [[ "$REPO" = "jetty" ]]; then
  : ${FROM:=$PREFIX/jdk:17}
  : ${VER:=11}
  [[ "$VER" = "12" ]] && VER="12.0.6"
  [[ "$VER" = "11" ]] && VER="11.0.20"
  [[ "$VER" = "10" ]] && VER="10.0.20"
  [[ "$VER" = "9"  ]] && VER="9.4.54" && FROM="$PREFIX/jdk:11"
  TAG=${VER%.*.*}
  RUN_OPT_CUSTOM1="
  --publish 8080:8080
  --publish 8443:8443"
  INFO="Eclipse Jetty (12 11 10 9)"
fi

if [[ "$REPO" = "jenkins-plugin-manager" ]]; then
  : ${FROM:=is/jdk:21}
  : ${VER:=2.13.2}
  RUN_OPT_CUSTOM1="
  --volume /tmp:/work"
  INFO="Jenkins Plugin Manager"
fi

if [[ "$REPO" = "jenkins" ]]; then
  : ${FROM:=$PREFIX/jdk:21}
  : ${VER:=2.516.2}
  #TAG=${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 8022:8022
  --publish 8080:8080
  --publish 8443:8443"
  INFO="Jenkins"
fi

if [[ "$REPO" = "gitiles" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=1.0.0.git21d5813}
  #TAG=${VER%.*},latest
  RUN_OPT_CUSTOM1="
  --publish 8080:8080"
  INFO="Gitiles"
fi

if [[ "$REPO" = "gerrit" ]]; then
  : ${FROM:=$PREFIX/jdk:21}
  : ${VER:=3.12.2}
  #TAG=${VER%.*.*}
  RUN_OPT_CUSTOM1="
  --publish 29418:29418
  --publish 8088:8080"
  INFO="Gerrit"
fi

if [[ "$REPO" = "plantuml" ]]; then
  : ${FROM:=$PREFIX/jetty:11}
  : ${VER:=1.2024.3}
  #TAG=latest
  RUN_OPT_CUSTOM1="
  --publish 8080:8080
  --publish 8443:8443"
fi

if [[ "$REPO" = "nexus" ]]; then
  #: ${FROM:=$PREFIX/jdk:1.8}
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=3.79.1}
  #TAG=${VER%-*}
  RUN_OPT_CUSTOM1="
  --publish 8088:8081
  --volume /var/opt/ap-nexus-t:/var/opt/nexus3"
  INFO="Nexus Repository Manager"
fi

if [[ "$REPO" = "sonarqube" ]]; then
  : ${FROM:=$PREFIX/jdk:21}
  : ${VER:=25.9.0.112764}
  TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 9000:9000
  --volume /usr/local/etc/ap-sonarqube-t:/usr/local/sonarqube/conf
  --volume /var/opt/ap-sonarqube-t:/var/opt/sonarqube"
  INFO="SonarQube"
fi

if [[ "$REPO" = "sonarscan" ]]; then
  : ${FROM:=$PREFIX/node:20}
  : ${VER:=7.1.0.4889}
  #TAG=${VER%.*}
  INFO="Sonar scanner cli"
fi

if [[ "$REPO" = "node" ]]; then
  : ${FROM:=$PREFIX/jdk:17}
  : ${VER:=20}
  [[ "$VER" = "20" ]] && VER="20.16.0"
  [[ "$VER" = "18" ]] && VER="18.20.4"
  [[ "$VER" = "16" ]] && VER="16.20.2"
  [[ "$VER" = "14" ]] && VER="14.21.3"
  [[ "$VER" = "12" ]] && VER="12.22.12"
  TAG=${VER%%.*}
  INFO="Node.js (20 18 16 14 12)"
fi

if [[ "$REPO" = "munge" ]]; then
  : ${FROM:=$PREFIX/rocky9}
  : ${VER:=0.5.16}
  TAG=latest
  RUN_OPT_CUSTOM1="
  --volume /usr/local/etc/munge:/usr/local/etc/munge"
fi

if [[ "$REPO" = "slurm" ]]; then
  : ${FROM:=$PREFIX/munge}
  : ${VER:=25.05}
  [[ "$VER" = "25.05" ]] && VER="25.05.3"
  [[ "$VER" = "24.11" ]] && VER="24.11.5"
  [[ "$VER" = "24.05" ]] && VER="24.05.4"
  [[ "$VER" = "21.08" ]] && VER="21.08.5"
  [[ "$VER" = "20.11" ]] && VER="20.11.8"
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --network host
  --volume /usr/local/etc/munge:/usr/local/etc/munge
  --volume /usr/local/etc/slurm:/usr/local/etc/slurm"
  INFO="Simple Linux Utility for Resource Management (25.05 24.11 24.05 21.08 20.11)"
fi

if [[ "$REPO" = "nginx" ]]; then
  : ${FROM:=$PREFIX/php:8.3}
  : ${VER:=1.29.1}
  TAG=${VER%.*.*},latest
  RUN_OPT_CUSTOM1="
  --publish 8888:80/tcp"
  INFO="Nginx"
  DOCS="c -F is/php:8.4 -S-php84!!c -F is/php:8.3 -S-php83!!c -F is/php:8.2 -S-php82!!c -F is/php:8.1 -S-php81"
fi

if [[ "$REPO" = "guacamole-server" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=1.6.0}
  #TAG=${VER%.*.*}
  RUN_OPT_CUSTOM1="
  --volume /usr/local/etc/ap-guacamole-t:/etc/guacamole"
  INFO="Guacamole server"
fi

if [[ "$REPO" = "guacamole-client" ]]; then
  : ${FROM:=$PREFIX/tomcat:9.0-jdk17}
  : ${VER:=1.6.0}
  #TAG=${VER%.*.*}
  RUN_OPT_CUSTOM1="
  --publish 8888:8080/tcp
  --volume /usr/local/etc/ap-guacamole-t:/etc/guacamole"
  INFO="Guacamole client"
fi

if [[ "$REPO" = "minio" ]]; then
  : ${FROM:=$PREFIX/centos7}
  : ${VER:=20210617}
  #TAG=latest
  RUN_OPT_CUSTOM1="
  --publish 9000:9000/tcp
  --volume /var/opt/minio/main:/var/opt/minio/main"
  INFO="Minio server"
fi

if [[ "$REPO" = "mongo" ]]; then
  : ${FROM:=$PREFIX/centos7}
  : ${VER:=5.0.3}
  [[ "$VER" = "5.0" ]] && VER="5.0.3"
  [[ "$VER" = "4.2" ]] && VER="4.2.18"
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 27017:27017/tcp
  --volume /usr/local/etc/ap-mongo-t:/usr/local/etc/mongo
  --volume /var/opt/ap-mongo-t:/var/opt/mongo"
  INFO="MongoDB (5.0 4.2)"
fi

if [[ "$REPO" = "rocketchat" ]]; then
  : ${FROM:=$PREFIX/node:12}
  : ${VER:=3.18.5}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 3001:3001/tcp
  --env MONGO_URL=mongodb://172.17.0.1:27017/rocketchat"
  INFO="Rocket Chat server (4.0.1 3.18.3)"
fi

if [[ "$REPO" = "prosody" ]]; then
  : ${FROM:=$PREFIX/debian10}
  : ${VER:=0.11.10}
  #TAG=latest
  RUN_OPT_CUSTOM1="
  --publish 5222:5222/tcp
  --volume /usr/local/etc/prosody:/usr/local/etc/prosody
  --volume /usr/local/etc/pki:/usr/local/etc/pki:ro"
  INFO="Prosody XMPP server"
fi

if [[ "$REPO" = "nagios" ]]; then
  : ${FROM:=$PREFIX/nginx}
  : ${VER:=4.5.9}
  #TAG=${VER%.*.*}
  RUN_OPT_CUSTOM1="
  --publish 8888:80/tcp
  --volume /usr/local/etc/nagios:/usr/local/etc/nagios
  --volume /var/opt/nagios:/var/opt/nagios"
  INFO="Nagios"
  DOCS="c -F is/nginx:1-php83"
fi

if [[ "$REPO" = "php" ]]; then
  : ${FROM:=$PREFIX/debian13}
  : ${INST:=-debian}
  : ${VER:=8.3}
  [[ "$VER" = "8.4" ]] && VER="8.4.11"
  [[ "$VER" = "8.3" ]] && VER="8.3.25"
  [[ "$VER" = "8.2" ]] && VER="8.2.29"
  [[ "$VER" = "8.1" ]] && VER="8.1.33"
  [[ "$VER" = "7.4" ]] && VER="7.4.33"
  [[ "$VER" = "7.3" ]] && VER="7.3.33"
  #TAG=${VER%.*},${VER%%.*}
  TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 9000:9000/tcp"
  INFO="PHP (8.4 8.3 8.2 8.1 7.4 7.3)"
  DOCS="c -F is/debian13 -I-debian13 -S-debian13!!c -F is/debian12 -I-debian12 -S-debian12!!c -F is/rocky10  -I-rocky10  -S-rocky10!!c -F is/centos7  -I-centos7  -S-centos7"
fi

if [[ "$REPO" = "mediawiki" ]]; then
  : ${FROM:=$PREFIX/nginx:1-php83}
  : ${VER:=1.44}
  [[ "$VER" = "1.44" ]] && VER="1.44.0"
  [[ "$VER" = "1.39" ]] && VER="1.39.13" && FROM="$PREFIX/nginx:1-php81"
  [[ "$VER" = "1.38" ]] && VER="1.38.5"  && FROM="$PREFIX/nginx:1-php81"
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8888:80/tcp
  --volume /var/opt/mediawiki/ap-mediawiki-t:/var/opt/mediawiki
  --volume /var/opt/sqlite/data/ap-sqlite-mediawiki-t:/var/opt/sqlite/data
  --volume /var/opt/nginx/ap-nginx-mediawiki-t:/var/opt/nginx/ap-nginx-mediawiki-t
  --env NGINX_ID=ap-nginx-mediawiki-t"
  INFO="Mediawiki (1.44 1.39 1.38)"
fi

if [[ "$REPO" = "roundcube" ]]; then
  : ${FROM:=$PREFIX/nginx}
  : ${VER:=1.6.11}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8888:80/tcp
  --volume /usr/local/etc/roundcube:/usr/local/etc/roundcube
  --volume /var/opt/roundcube:/var/opt/roundcube
  --volume /var/opt/sqlite/data/roundcube:/var/opt/sqlite/data/roundcube
  --volume /var/opt/nginx/webmail:/var/opt/nginx/webmail
  --env NGINX_ID=webmail"
  INFO="Roundcube"
fi

if [[ "$REPO" = "ruby" ]]; then
  : ${FROM:=$PREFIX/centos7}
  : ${VER:=3.2}
  [[ "$VER" = "3.2" ]] && VER="3.2.3" && FROM="$PREFIX/debian12"
  [[ "$VER" = "3.0" ]] && VER="3.0.6"
  [[ "$VER" = "2.7" ]] && VER="2.7.8"
  [[ "$VER" = "2.6" ]] && VER="2.6.9"
  TAG=${VER%.*}
  INFO="Ruby (3.2 3.0 2.7 2.6)"
  DOCS="c -F is/debian12 -S-debian12"
fi

if [[ "$REPO" = "redmine" ]]; then
  : ${FROM:=$PREFIX/ruby:2.7}
  : ${VER:=5.1}
  [[ "$VER" = "5.1" ]] && VER="5.1.8" && FROM="$PREFIX/ruby:3.2"
  [[ "$VER" = "5.0" ]] && VER="5.0.7"
  [[ "$VER" = "4.2" ]] && VER="4.2.11"
  [[ "$VER" = "4.0" ]] && VER="4.0.9" && FROM="$PREFIX/ruby:2.6"
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 3000:3000/tcp
  --volume /usr/local/etc/redmine:/usr/local/etc/redmine
  --volume /var/opt/redmine:/var/opt/redmine"
  INFO="Redmine (5.1 5.0 4.2 4.0)"
fi

if [[ "$REPO" = "synapse" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=1.106.0}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8008:8008/tcp
  --publish 8448:8448/tcp
  --volume /usr/local/etc/pki:/usr/local/etc/pki
  --volume /usr/local/etc/synapse:/usr/local/etc/synapse"
  INFO="Matrix Synapse Homeserver"
fi

if [[ "$REPO" = "dendrite" ]]; then
  : ${FROM:=$PREFIX/centos7}
  : ${VER:=0.5.1}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8008:8008/tcp
  --publish 8448:8448/tcp
  --volume /usr/local/etc/pki:/usr/local/etc/pki
  --volume /usr/local/etc/ap-dendrite-t:/usr/local/etc/dendrite"
  INFO="Matrix Dendrite Homeserver"
fi

if [[ "$REPO" = "sydent" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=2.6.1}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8090:8090
  --volume /var/opt/sydent:/var/opt/sydent"
  INFO="Matrix Sydent Server"
fi

if [[ "$REPO" = "element" ]]; then
  : ${FROM:=$PREFIX/nginx}
  : ${VER:=1.11.58}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8443:443/tcp
  --volume /usr/local/etc/pki:/usr/local/etc/pki
  --volume /usr/local/etc/ap-element-t:/usr/local/etc/element
  --volume /var/opt/nginx/ap-element-t:/var/opt/nginx/element
  --env NGINX_ID=element"
  INFO="Element Web"
fi

if [[ "$REPO" = "nfast-client" ]]; then
  : ${FROM:=$PREFIX/centos7}
  : ${VER:=12}
  [[ "$VER" = "12" ]] && VER="12.81.2"
  #TAG=${VER%.*.*},${VER%.*}
  NFAST_ID=sws
  RUN_OPT_CUSTOM1="
  --volume /var/opt/nfast/${NFAST_ID}/kmdata:/opt/nfast/kmdata\
  --volume /var/opt/nfast/${NFAST_ID}/sockets:/opt/nfast/sockets"
  INFO="nCipher SecWorld client (12)"
fi

if [[ "$REPO" = "nfast-server" ]]; then
  : ${FROM:=$PREFIX/nfast-client:12}
  : ${VER:=12}
  [[ "$VER" = "12" ]] && VER="12.81.2"
  #TAG=${VER%.*.*},${VER%.*}
  NFAST_ID=sws
  RUN_OPT_CUSTOM1="
  --publish 9004:9004/tcp
  --publish 1161:161/udp
  --volume /var/opt/nfast/${NFAST_ID}/kmdata:/opt/nfast/kmdata
  --volume /var/opt/nfast/${NFAST_ID}/sockets:/opt/nfast/sockets"
  INFO="nCipher SecWorld server (12)"
fi

if [[ "$REPO" = "dante" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=1.4.4}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 1081:1080/tcp
  --volume /usr/local/etc/ap-dante-t:/usr/local/etc/dante"
  INFO="Dante SOCKS server"
fi

if [[ "$REPO" = "stunnel" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=5.75}
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8118:8118/tcp
  --volume /usr/local/etc/ap-stunnel-t:/usr/local/etc/stunnel"
fi

if [[ "$REPO" = "coturn" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=4.6.2}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 1081:1080/tcp
  --volume /usr/local/etc/pki:/usr/local/etc/pki
  --volume /usr/local/etc/ap-coturn-t:/usr/local/etc/coturn"
  INFO="Coturn STUN/TURN server"
fi

if [[ "$REPO" = "gotify" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=2.2.4}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8585:80/tcp
  --volume /var/opt/ap-gotify-t:/var/opt/gotify"
  INFO="Gotify server"
fi

if [[ "$REPO" = "ntfy" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=2.8.0}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8080:8080/tcp
  --volume /usr/local/etc/ap-ntfy-t:/usr/local/etc/ntfy
  --volume /var/opt/ap-ntfy-t:/var/opt/ntfy"
  INFO="Ntfy server"
fi

if [[ "$REPO" = "clamav" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=1.3.0}
  #TAG=${VER%.*.*},${VER%.*},latest
  TAG=latest
  RUN_OPT_CUSTOM1="
  --publish 3310:3310/tcp
  --volume /usr/local/etc/gpg:/usr/local/etc/gpg
  --volume /var/opt/ap-clamav-t:/var/opt/clamav"
  INFO="ClamAV"
  DOCS="c -r -- freshclam!!c -r --volume /pub:/scan:ro -- clamscan -r /scan!!c -r --volume /pub:/scan:ro -- clamscan -r -io /scan"
fi

if [[ "$REPO" = "hypatia" ]]; then
  : ${FROM:=$PREFIX/clamav}
  : ${VER:=1.3.0}
  #TAG=${VER%.*.*},${VER%.*},latest
  RUN_OPT_CUSTOM1="
  --volume /usr/local/etc/gpg:/usr/local/etc/gpg
  --volume /var/opt/clamav:/var/opt/clamav"
  INFO="Hypatia"
fi

if [[ "$REPO" = "wordpress" ]]; then
  : ${FROM:=$PREFIX/nginx:1-php82}
  : ${VER:=6.8.2}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8181:80/tcp
  --volume /usr/local/etc/pki:/usr/local/etc/pki
  --volume /var/opt/wordpress/ap-wordpress-t:/var/opt/wordpress
  --volume /var/opt/nginx/ap-wordpress-t:/var/opt/nginx/ap-wordpress-t
  --env NGINX_ID=ap-wordpress-t"
  INFO="Wordpress"
fi

if [[ "$REPO" = "ssp" ]]; then
  : ${FROM:=$PREFIX/nginx}
  : ${VER:=1.7.3}
  #TAG=${VER%.*.*}
  RUN_OPT_CUSTOM1="
  --publish 8888:80/tcp
  --volume /usr/local/etc/ap-ssp-t:/usr/local/etc/ssp
  --volume /var/opt/nginx/ap-ssp-t:/var/opt/nginx/ssp
  --env NGINX_PHP=1
  --env NGINX_ID=ssp"
  INFO="Self Sevice Password"
fi

if [[ "$REPO" = "phpldapadmin" ]]; then
  : ${FROM:=$PREFIX/nginx:1-php81}
  : ${VER:=1.2.6.7}
  TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8888:8080/tcp
  --volume /usr/local/etc/ap-pla-t:/usr/local/etc/phpldapadmin
  --volume /var/opt/nginx/ap-pla-t:/var/opt/nginx/ap-pla-t"
  INFO="phpLDAPadmin"
fi

if [[ "$REPO" = "cgit" ]]; then
  : ${FROM:=$PREFIX/nginx}
  : ${VER:=1.2.3}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8888:8080/tcp
  --volume /usr/local/etc/ap-cgit-t:/usr/local/etc/cgit
  --volume /var/opt/nginx/ap-cgit-t:/var/opt/nginx/ap-cgit-t
  --volume /u01/dcvroot/git:/var/opt/gitroot
  --env NGINX_ID=ap-cgit-t
  --env NGINX_CGI=1"
  INFO="cgit"
fi

if [[ "$REPO" = "viewvc" ]]; then
  : ${FROM:=$PREFIX/nginx}
  : ${VER:=1.1.30}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8888:8080/tcp
  --volume /usr/local/etc/ap-viewvc-t:/usr/local/etc/viewvc
  --volume /var/opt/nginx/ap-viewvc-t:/var/opt/nginx/ap-viewvc-t
  --volume /u01:/u01
  --env NGINX_ID=ap-viewvc-t
  --env NGINX_CGI=1"
  INFO="ViewVC"
fi

if [[ "$REPO" = "asterisk" ]]; then
  : ${FROM:=is/debian12}
  : ${VER:=21}
  [[ "$VER" = "21" ]] && VER="21.2.0"
  [[ "$VER" = "20" ]] && VER="20.5.2"
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --network host
  --volume /usr/local/etc/ap-asterisk-t:/usr/local/etc/asterisk
  --volume /var/opt/ap-asterisk-t:/var/opt/asterisk"
  INFO="Asterisk (21 20)"
fi

if [[ "$REPO" = "chartmuseum" ]]; then
  : ${FROM:=is/debian12}
  : ${VER:=0.16.3}
  #TAG=${VER%.*.*},${VER%.*},latest
  RUN_OPT_CUSTOM1="
  --publish 8888:8080/tcp
  --volume /var/opt/ap-chartmuseum-t:/var/opt/chartmuseum"
  INFO="Chartmuseum"
fi

if [[ "$REPO" = "registry" ]]; then
  : ${FROM:=is/debian12}
  : ${VER:=3.0.0}
  #TAG=${VER%.*.*},${VER%.*},latest
  RUN_OPT_CUSTOM1="
  --publish 5443:5443/tcp
  --volume /usr/local/etc/pki:/usr/local/etc/pki
  --volume /usr/local/etc/ap-registry-t:/usr/local/etc/registry
  --volume /var/opt/ap-registry-t:/var/opt/registry"
  INFO="Registry"
fi

if [[ "$REPO" = "vdbench" ]]; then
  : ${FROM:=is/jdk:17}
  : ${VER:=5.04.07}
  #TAG=${VER%.*.*},${VER%.*},latest
  RUN_OPT_CUSTOM1="
  --volume /tmp:/work"
  INFO="Vdbench"
fi

if [[ "$REPO" = "nextcloud" ]]; then
  : ${FROM:=is/nginx}
  : ${VER:=30.0.6}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8888:8080/tcp
  --volume /var/opt/nextcloud:/var/opt/nextcloud
  --volume /usr/local/etc/ap-nc-mcp:/usr/local/etc/nextcloud
  --volume /var/opt/nginx/ap-nc-mcp:/var/opt/nginx/ap-nc-mcp
  --env NGINX_ID=ap-nc-mcp\
  --env NGINX_PHP=1"
  INFO="Nextcloud"
fi

if [[ "$REPO" = "fwknop" ]]; then
  : ${FROM:=is/debian12}
  : ${VER:=2.6.11.61}
  : ${SUFFIX:="-${FROM:3}"}
  #TAG=${VER%%.*}${SUFFIX}
  RUN_OPT_CUSTOM1="
  --volume /usr/local/etc/ap-fwknop-t:/usr/local/etc/fwknop
  --volume /run/dbus/system_bus_socket:/run/dbus/system_bus_socket"
  INFO="fwknop"
  DOCS="c -F is/debian12!!c -F is/centos7"
fi

if [[ "$REPO" = "openvpn" ]]; then
  : ${FROM:=is/debian12}
  : ${VER:=2.6.14}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --network host
  --volume /usr/local/etc/ap-openvpn-t:/usr/local/etc/openvpn"
  INFO="OpenVPN"
fi

if [[ "$REPO" = "openvpnx" ]]; then
  : ${FROM:=is/centos7}
  : ${VER:=2.6.8}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --network host
  --volume /usr/local/etc/ap-openvpn-t:/usr/local/etc/openvpn"
  INFO="OpenVPNX"
fi

if [[ "$REPO" = "hmdm" ]]; then
  : ${FROM:=$PREFIX/tomcat:9.0-jdk15}
  : ${VER:=5.13.3}
  #TAG=${VER%.*.*},${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 8080:8080
  --publish 8443:8443
  --volume /var/opt/tomcat/hmdm/work:/var/opt/tomcat/work"
  INFO="Headwind MDM"
fi

if [[ "$REPO" = "sphinx" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=8}
  [[ "$VER" = "8" ]] && VER="8.2.3"
  [[ "$VER" = "7" ]] && VER="7.4.6"
  [[ "$VER" = "6" ]] && VER="6.2.1"
  #TAG=${VER%.*.*},${VER%.*},latest
  INFO="Sphinx (8 7 6)"
fi

if [[ "$REPO" = "drawio-desktop" ]]; then
  : ${FROM:=$PREFIX/debian13}
  : ${VER:=28.1.2}
  #TAG=${VER%.*.*},${VER%.*},latest
  RUN_OPT_CUSTOM1="
  --cap-add SYS_ADMIN
  --volume /tmp/.X11-unix/:/tmp/.X11-unix/
  --volume /dev/dri/:/dev/dri/
  --env DISPLAY=$DISPLAY"
  INFO="Drawio Desktop"
fi

if [[ "$REPO" = "fdroidserver" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=2.4.2}
  #TAG=${VER%.*.*},${VER%.*}
  INFO="F-Droid Server Tools"
fi

if [[ "$REPO" = "minidlna" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=1.3.0}
  #TAG=${VER%.*.*},${VER%.*}
  INFO="Minidlna"
fi

if [[ "$REPO" = "drbd-utils" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=9.23.1}
  #TAG=${VER%.*.*},${VER%.*}
  INFO="DRBD Utils"
fi

if [[ "$REPO" = "sshd" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=9.2}
  #TAG=${VER%.*}
  RUN_OPT_CUSTOM1="
  --publish 2222:22
  --volume /usr/local/etc/ap-ssh-t:/usr/local/etc/ssh:ro
  --volume /var/opt/sshd/home:/home"
  INFO="sftp server"
fi

if [[ "$REPO" = "iperf" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=3}
  TAG=latest
  RUN_OPT_CUSTOM1="
  --publish 5201:5201/tcp
  --publish 5201:5201/udp
  --publish 5001:5001/tcp
  --publish 5001:5001/udp"
  INFO="iperf3/2 client/server"
fi

if [[ "$REPO" = "gcc" ]]; then
  : ${INST:=-debian12}
  : ${SUFFIX:=-debian12}
  [[ "$SUFFIX" = "-centos7"  ]] && FROM="$PREFIX/centos7"
  [[ "$SUFFIX" = "-rocky8"   ]] && FROM="$PREFIX/rocky8"
  [[ "$SUFFIX" = "-rocky9"   ]] && FROM="$PREFIX/rocky9"
  [[ "$SUFFIX" = "-debian11" ]] && FROM="$PREFIX/debian11"
  [[ "$SUFFIX" = "-debian12" ]] && FROM="$PREFIX/debian12"
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=13}
  [[ "$VER" = "13" ]] && VER="13.2.0"
  [[ "$VER" = "12" ]] && VER="12.2.0"
  [[ "$VER" = "9"  ]] && VER="9.2.0"
  [[ "$VER" = "8"  ]] && VER="8.3.0"
  [[ "$VER" = "4"  ]] && VER="4.8.5"
  #TAG=${VER%.*},${VER%%.*}
  INFO="GCC (13 12 9 8 4)"
  DOCS="c -S-centos7 -I-centos7!!c -S-rocky8  -I-rocky8!!c -S-rocky9  -I-rocky9"
fi

if [[ "$REPO" = "icc" ]]; then
  : ${FROM:=$PREFIX/rocky9}
  : ${VER:=2023.2.1}
  #TAG=${VER%.*},${VER%%.*}
  INFO="Intel Compiler Classic"
fi

if [[ "$REPO" = "hpl" ]]; then
  : ${FROM:=$PREFIX/icc:2023}
  : ${SUFFIX:=-icc}
  : ${TYPE:=icc}
  : ${VER:=2.3}
  #TAG=${VER%.*},${VER%%.*}
  INFO="High-Performance Linpack"
fi

if [[ "$REPO" = "frr" ]]; then
  : ${FROM:=$PREFIX/debian12}
  [[ "$SUFFIX" = "-rocky9"   ]] && FROM="$PREFIX/rocky9"
  : ${VER:=10}
  [[ "$VER" = "10" ]] && VER="10.4.1"
  [[ "$VER" = "9" ]]  && VER="9.1.0"
  #TAG=${VER%%.*}
  RUN_OPT_CUSTOM1="
  --net host
  --cap-add=SYS_ADMIN
  --cap-add=NET_ADMIN
  --volume /usr/local/etc/ap-frr-t:/usr/local/etc/frr"
  INFO="FRRouting (10 9)"
  DOCS="c -S-rocky9"
fi

if [[ "$REPO" = "netxms-web" ]]; then
  : ${FROM:=$PREFIX/tomcat:9.0}
  : ${VER:=5.0.5}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 8080:8080
  --publish 8443:8443
  --env JAVA_OPTS=-Dnxmc.server=127.0.0.1:6666
  --env CATALINA_OPTS=-Dnxmc.logfile=/tmp/nxmc.log"
  INFO="NetXMS Web Console"
fi

if [[ "$REPO" = "netxms-server" ]]; then
  : ${FROM:=$PREFIX/rocky9}
  : ${VER:=5.0.5}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 4701:4701/tcp
  --publish 4747:4747/tcp
  --publish 162:162/udp
  --volume /usr/local/etc/ap-netxms-t:/usr/local/etc/netxms"
  INFO="NetXMS Server"
fi

if [[ "$REPO" = "bacula" ]]; then
  : ${FROM:=$PREFIX/rocky9}
  : ${VER:=15.0.2}
  #TAG=${VER%.*},${VER%%.*}
  RUN_OPT_CUSTOM1="
  --publish 9101:9101/tcp
  --publish 9102:9102/tcp
  --publish 9103:9103/tcp
  --volume /usr/local/etc/ap-bacula-t:/usr/local/etc/bacula"
  INFO="Bacula Backup"
fi

if [[ "$REPO" = "certbot" ]]; then
  : ${FROM:=$PREFIX/debian13}
  : ${VER:=5}
  [[ "$VER" = "5" ]] && VER="5.0.0"
  [[ "$VER" = "4" ]] && VER="4.1.0" && FROM="$PREFIX/debian12"
  #TAG=${VER%.*},${VER%%.*}
  INFO="Tool to obtain certs from Lets Encrypt"
fi

if [[ "$REPO" = "osdev" ]]; then
  : ${FROM:=$PREFIX/node:20}
  : ${VER:=1.0.0}
  #TAG=${VER%.*},${VER%%.*}
  INFO="OS/GOS/AOSP Toolkit"
fi

if [[ "$REPO" = "keycloak" ]]; then
  : ${FROM:=is/jdk:21}
  : ${VER:=26.3.4}
  RUN_OPT_CUSTOM1="
  --publish 8080:8080/tcp
  --volume /usr/local/etc/ap-keycloak-t:/usr/local/etc/keycloak
  --volume /var/opt/keycloak/ap-keycloak-t:/var/opt/keycloak"
  INFO="Keycloak"
fi

if [[ "$REPO" = "samba" ]]; then
  : ${FROM:=$PREFIX/debian13}
  : ${VER:=4.23}
  [[ "$VER" = "4.23" ]] && VER="4.23.0"
  [[ "$VER" = "4.22" ]] && VER="4.22.4"
  RUN_OPT_CUSTOM1="
  --network host
  --volume /usr/local/etc/ap-sssd-t:/etc/sssd
  --volume /usr/local/etc/ap-samba-t:/usr/local/etc/samba
  --volume /var/opt/samba/ap-samba-t:/var/opt/samba"
  INFO="Samba (4.23 4.22)"
fi

if [[ "$REPO" = "socat" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=1.8.0.3}
  TAG=${VER%.*},latest
  INFO="Socat "
fi

if [[ "$REPO" = "firefox" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=141.0.3}
  TAG=latest
  INFO="Firefox "
fi

if [[ "$REPO" = "thunderbird" ]]; then
  : ${FROM:=$PREFIX/debian12}
  : ${VER:=141.0}
  TAG=latest
  INFO="Thunderbird "
fi

if [[ "$REPO" = "wine64" ]]; then
  : ${FROM:=$PREFIX/debian13}
  : ${VER:=10.15}
  TAG=latest
  INFO="Wine64"
fi
